@echo off
chcp 65001 >nul
title 웰스FA · 배포 + 별자리 동영상 순차 실행
cd /d "%~dp0"

echo.
echo ╔══════════════════════════════════════════════╗
echo ║   웰스FA · 배포 + 동영상 순차 자동 실행      ║
echo ║                                              ║
echo ║  [1단계] Streamlit 배포 (배포하기.bat)       ║
echo ║  [2단계] 별자리 동영상 생성                  ║
echo ║                                              ║
echo ║  ⚠️  각 단계는 독립 실행 (코드 합치지 않음)   ║
echo ╚══════════════════════════════════════════════╝
echo.
pause

:: ══════════════════════════════════════════════════
:: [1단계] Streamlit 배포
:: ══════════════════════════════════════════════════
echo.
echo ┌─────────────────────────────────────────────┐
echo │  [1/2] Streamlit 배포 시작...               │
echo └─────────────────────────────────────────────┘
echo.

call "%~dp0배포하기.bat"

:: 배포 성공 여부 확인
if errorlevel 1 (
    echo.
    echo ❌ [1단계 실패] 배포 중 오류가 발생했습니다.
    echo    2단계(동영상 생성)를 건너뜁니다.
    echo.
    pause
    exit /b 1
)

echo.
echo ✅ [1단계 완료] Streamlit 배포 성공!
echo    https://wealhfa.streamlit.app/
echo.
echo ════════════════════════════════════════════════
timeout /t 3 /nobreak >nul

:: ══════════════════════════════════════════════════
:: [2단계] 별자리 동영상 만들기
:: ══════════════════════════════════════════════════
echo.
echo ┌─────────────────────────────────────────────┐
echo │  [2/2] 별자리 동영상 생성 시작...            │
echo │  (HTML 생성 → 브라우저 녹화 → MP4 변환)      │
echo └─────────────────────────────────────────────┘
echo.

call "%~dp0별자리_동영상만들기.bat"

if errorlevel 1 (
    echo.
    echo ❌ [2단계 실패] 동영상 생성 중 오류가 발생했습니다.
    echo.
    pause
    exit /b 1
)

:: ══════════════════════════════════════════════════
:: 완료
:: ══════════════════════════════════════════════════
echo.
echo ╔══════════════════════════════════════════════╗
echo ║   🎉 모든 작업 완료!                         ║
echo ║                                              ║
echo ║  ✅ Streamlit 배포 → 완료                    ║
echo ║  ✅ 별자리 동영상 → 완료 (매일업데이트 폴더)  ║
echo ╚══════════════════════════════════════════════╝
echo.
pause
